<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Como Usar APIs - Guia MP</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="header-placeholder"></div>
    <div id="nav-placeholder"></div>

    <div class="container">
        <h2>Como Usar APIs</h2>
        <p>APIs (Application Programming Interfaces) s√£o interfaces que permitem a comunica√ß√£o entre diferentes sistemas e aplica√ß√µes, viabilizando a troca de dados e funcionalidades de forma segura e eficiente. No contexto do Minist√©rio P√∫blico, o uso correto e seguro de APIs √© fundamental para garantir a prote√ß√£o de informa√ß√µes sens√≠veis e a integridade dos sistemas, especialmente ao integrar servi√ßos de IA Generativa.</p>

        <section>
            <h3>üîê 1. Armazenar Chaves de API com Seguran√ßa</h3>
            <ul>
                <li><strong>Utilizar Cofres de Segredos (Secret Vaults):</strong>
                    <ul>
                        <li>Ferramentas como Azure Key Vault, AWS Secrets Manager e Google Secret Manager permitem armazenar e proteger chaves de API, tokens de acesso e outros segredos.</li>
                        <li>Configure permiss√µes de acesso restritas (princ√≠pio do menor privil√©gio), garantindo que apenas usu√°rios e sistemas autorizados possam acessar as chaves.</li>
                        <li>Evite armazenar chaves de API diretamente no c√≥digo-fonte, em arquivos de configura√ß√£o n√£o protegidos ou em vari√°veis de ambiente de f√°cil acesso.</li>
                    </ul>
                </li>
            </ul>
            <div class="example">
                <p class="example-title">Exemplo Pr√°tico:</p>
                <p><strong>No Azure Key Vault:</strong></p>
                <ol>
                    <li>Crie um cofre de segredos (Key Vault).</li>
                    <li>Adicione a chave de API como um "segredo" dentro do cofre.</li>
                    <li>Defina pol√≠ticas de acesso espec√≠ficas para as aplica√ß√µes ou identidades gerenciadas (Managed Identities) que precisam usar essa chave, concedendo apenas as permiss√µes necess√°rias (ex: "Get Secret").</li>
                    <li>A aplica√ß√£o recupera a chave do Key Vault em tempo de execu√ß√£o, em vez de t√™-la em seu c√≥digo.</li>
                </ol>
            </div>
        </section>

        <section>
            <h3>üìä 2. Controlar Custos e Habilitar Auditoria de Uso</h3>
            <ul>
                <li><strong>Monitorar o Uso de APIs:</strong> Utilize ferramentas de monitoramento e dashboards (oferecidos pelo provedor da API ou por plataformas de gerenciamento de API) para acompanhar o consumo de APIs, identificar padr√µes de uso, poss√≠veis abusos ou uso n√£o autorizado.</li>
                <li><strong>Estabelecer Limites de Uso (Rate Limiting e Quotas):</strong> Defina limites de chamadas (rate limiting) por usu√°rio, por chave de API ou por IP para evitar consumo excessivo, proteger os recursos contra ataques de nega√ß√£o de servi√ßo (DoS) e controlar custos. Configure quotas para limitar o n√∫mero total de chamadas em um per√≠odo.</li>
                <li><strong>Habilitar Auditoria:</strong> Ative o registro de logs detalhados para todas as chamadas de API. Os logs devem incluir informa√ß√µes como: quem acessou a API (identificador do usu√°rio/aplica√ß√£o), qual endpoint foi acessado, quando (timestamp), de qual endere√ßo IP, o status da requisi√ß√£o e os par√¢metros utilizados (com dados sens√≠veis mascarados).</li>
            </ul>
            <div class="example">
                <p class="example-title">Exemplo Pr√°tico:</p>
                <p><strong>No Azure API Management:</strong></p>
                <ul>
                    <li>Defina pol√≠ticas de limite de taxa (e.g., 100 chamadas por minuto por chave de API) e pol√≠ticas de quota (e.g., 10.000 chamadas por m√™s por assinatura).</li>
                    <li>Integre com o Azure Monitor e o Application Insights para coletar logs de diagn√≥stico, m√©tricas de uso e configurar alertas para identificar picos de uso anormais ou erros frequentes.</li>
                </ul>
            </div>
        </section>

        <section>
            <h3>üîí 3. Garantir Criptografia em Tr√¢nsito e em Repouso</h3>
            <ul>
                <li><strong>Criptografia em Tr√¢nsito (TLS 1.2+):</strong>
                    <ul>
                        <li>Use o protocolo TLS (Transport Layer Security) vers√£o 1.2 ou superior para proteger a comunica√ß√£o entre o cliente (sua aplica√ß√£o) e o servidor da API. Isso garante que os dados trocados sejam criptografados e n√£o possam ser interceptados.</li>
                        <li>Configure o servidor da API para aceitar apenas conex√µes seguras (HTTPS) e desative vers√µes obsoletas e inseguras de SSL/TLS (como SSLv3, TLS 1.0, TLS 1.1).</li>
                    </ul>
                </li>
                <li><strong>Criptografia em Repouso:</strong>
                    <ul>
                        <li>Se a API ou o sistema que a consome armazena dados sens√≠veis (recebidos ou gerados pela API), esses dados devem ser criptografados em repouso, utilizando algoritmos de criptografia fortes como AES-256.</li>
                        <li>Em bancos de dados, habilite a criptografia em n√≠vel de disco (ex: Transparent Data Encryption - TDE) e considere a criptografia em n√≠vel de coluna para campos particularmente sens√≠veis.</li>
                    </ul>
                </li>
            </ul>
            <div class="example">
                <p class="example-title">Exemplo Pr√°tico:</p>
                <p><strong>Em uma API hospedada no Azure App Service:</strong></p>
                <ul>
                    <li>Ative "HTTPS Only" para for√ßar o redirecionamento de todas as conex√µes HTTP para HTTPS.</li>
                    <li>Configure a vers√£o m√≠nima do TLS para 1.2 nas configura√ß√µes do App Service.</li>
                    <li>Se a API interage com um Banco de Dados SQL do Azure, ative o Transparent Data Encryption (TDE) e, se necess√°rio, o Always Encrypted para colunas espec√≠ficas.</li>
                </ul>
            </div>
        </section>

        <section>
            <h3>üöÄ 4. Outros Aspectos Essenciais para o Uso de APIs</h3>
            <ul>
                <li><strong>Controle de Acesso e Autentica√ß√£o Forte:</strong>
                    <ul>
                        <li>Utilize mecanismos de autentica√ß√£o robustos para proteger suas APIs, como OAuth 2.0 (com fluxos apropriados, como Client Credentials para comunica√ß√£o m√°quina-a-m√°quina ou Authorization Code para usu√°rios) ou OpenID Connect (OIDC) para autenticar usu√°rios.</li>
                        <li>Implemente autoriza√ß√£o baseada em escopos (scopes) ou pap√©is (roles) para garantir que os clientes da API tenham acesso apenas √†s funcionalidades e dados estritamente necess√°rios para sua opera√ß√£o (princ√≠pio do menor privil√©gio).</li>
                        <li>Considere o uso de Autentica√ß√£o Multifator (MFA) para acesso a portais de gerenciamento de API ou para opera√ß√µes cr√≠ticas.</li>
                    </ul>
                </li>
                <li><strong>Valida√ß√£o de Entrada e Sa√≠da:</strong>
                    <ul>
                        <li>Valide rigorosamente todos os dados de entrada recebidos pela API para prevenir ataques como inje√ß√£o de SQL, XSS (Cross-Site Scripting) e outros. Verifique tipos de dados, tamanhos, formatos e intervalos permitidos.</li>
                        <li>Valide e sanitize os dados de sa√≠da para evitar o vazamento de informa√ß√µes sens√≠veis ou a propaga√ß√£o de conte√∫do malicioso.</li>
                    </ul>
                </li>
                <li><strong>Seguran√ßa contra Ataques Comuns (OWASP API Security Top 10):</strong>
                    <ul>
                        <li>Proteja as APIs contra as vulnerabilidades mais comuns, como Broken Object Level Authorization, Broken User Authentication, Excessive Data Exposure, Lack of Resources & Rate Limiting, etc.</li>
                        <li>Implemente Web Application Firewalls (WAFs) e prote√ß√£o contra DDoS (Distributed Denial of Service) na frente das suas APIs.</li>
                    </ul>
                </li>
                <li><strong>Gerenciamento de Vers√µes:</strong>
                    <ul>
                        <li>Implemente uma estrat√©gia de versionamento para suas APIs (ex: no URI, cabe√ßalho HTTP) para permitir atualiza√ß√µes e evolu√ß√µes sem quebrar integra√ß√µes existentes.</li>
                        <li>Comunique claramente as mudan√ßas e planos de descontinua√ß√£o de vers√µes antigas.</li>
                    </ul>
                </li>
                <li><strong>Testes de Seguran√ßa Regulares:</strong>
                    <ul>
                        <li>Realize testes regulares de seguran√ßa (como testes de penetra√ß√£o - pentests, e revis√µes de c√≥digo seguro) espec√≠ficos para as APIs.</li>
                        <li>Utilize scanners autom√°ticos de seguran√ßa de API e ferramentas de an√°lise est√°tica (SAST) e din√¢mica (DAST) de c√≥digo.</li>
                    </ul>
                </li>
            </ul>
        </section>

        <div class="example">
            <p class="example-title">‚úÖ Exemplo Completo de Implementa√ß√£o de API Segura (Checklist Simplificado):</p>
            <ol>
                <li><strong>Armazenar Chaves de API:</strong> No Azure Key Vault, armazenar a chave de API com permiss√µes de leitura apenas para o servi√ßo/aplica√ß√£o autorizada.</li>
                <li><strong>Controlar Custos e Habilitar Auditoria:</strong> Configurar o Azure API Management para limitar chamadas (ex: 1000 requisi√ß√µes por minuto por usu√°rio/chave). Habilitar o log de auditoria, registrando todas as chamadas, usu√°rios e IPs.</li>
                <li><strong>Garantir Criptografia:</strong> Ativar HTTPS com TLS 1.2+ para toda comunica√ß√£o da API. Armazenar dados sens√≠veis no banco de dados com criptografia AES-256 (TDE e/ou Always Encrypted).</li>
                <li><strong>Autentica√ß√£o e Controle de Acesso:</strong> Utilizar OAuth 2.0 com escopos definidos para usu√°rios e servi√ßos. Implementar autentica√ß√£o multifator (MFA) para acesso administrativo √† plataforma de API.</li>
                <li><strong>Valida√ß√£o:</strong> Validar todos os par√¢metros de entrada e sanitizar sa√≠das.</li>
                <li><strong>Monitoramento e Alertas:</strong> Configurar alertas para tr√°fego an√¥malo ou taxas de erro elevadas.</li>
            </ol>
        </div>
    </div>

    <div id="footer-placeholder"></div>
    <script src="js/layout.js"></script>
    <script src="js/script.js"></script>
</body>
</html>